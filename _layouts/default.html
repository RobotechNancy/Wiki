<!DOCTYPE html>

<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>{{ site.title }} - {{ page.title }}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta description="{{ site.description }}">

		<meta property="og:type" content="website">
		<meta property="og:url" content="{{ site.url }}">
		<meta property="og:site_name" content="{{ site.title }}">
		<meta property="og:image" content="{{ site.baseurl }}/images/icons/logo.webp">
		<meta property="og:title" content="{% if page.category %}{{ page.category }} {{ page.subcategory }} - {% endif %}{{ page.title }}">
		<meta property="og:description" content="{{ site.description }}">
		<meta data-react-helmet="true" name="theme-color" content="#3583d6" />

		<link rel="stylesheet" href="{{ site.baseurl }}/css/main.css">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700&display=swap">
	
		<link rel="apple-touch-icon" href="/images/icons/logo.webp">
		<link rel="icon" type="image/webp" href="/images/icons/logo.webp">

		<script type="text/javascript" src="/scripts/turbolinks.js"></script>
	</head>

	<body>
		<header>
			<h1>
				<a href="{{ site.baseurl }}/">
					<img src="/images/icons/logo.webp" width="40" height="40" alt="{{ site.title }} logo">
					<span>{{ site.title }}</span>
				</a>
				<button type="button" class="open-nav" aria-label="Ouvrir la navigation" onclick="openNav()"></button>
			</h1>

			<form action="{{ site.baseurl }}/search" method="get">
				<input type="text" name="q" id="search-input" placeholder="Rechercher" autofocus>
				<input type="submit" value="Search" style="display: none;">
			</form>

			<nav>
				<ul>
					{%- assign grouped = site.docs | sort: 'category_order' | group_by: 'category' %}
					{%- for group in grouped %} {% if group.name != '' %}
					<li class="nav-item top-level {% if group.name == page.category %}active{% endif %}">
						<span class="nav-cat" onclick="changeActive()" onkeydown="onKeyDown()" tabindex="0">{{ group.name }}</span>

						{%- assign subcategories = site.docs | where: 'category', group.name | sort: 'subcategory_order' | group_by: 'subcategory' -%}
						{% for subcategory in subcategories %}
						<ul>
							{% if subcategory.name != "" -%}
							<li class="nav-item mid-level">
								<span>{{ subcategory.name }}</span>
							</li>
							{%- endif %}

							{%- assign items = subcategory.items | sort: 'order' -%}
							{% for item in items -%}
							<li class="nav-item {% if subcategory.name != '' %}sub-level{% endif %}">
								<a href="{{ site.baseurl }}{{ item.url }}">{{ item.title }}</a>
							</li>
							{%- endfor %}
						</ul>
						{%- endfor %}
					</li>
					{%- endif %}{% endfor %}
				</ul>
			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<h2>
					{%- if page.subcategory -%}
						{{ page.category }} {{ page.subcategory }}
					{%- else -%}
						{{ page.category | default: site.title }}
					{%- endif -%}
				</h2>
				<h3 class="no-anchor">{{ page.title }}</h3>
			</div>
			<article class="content">
				{{ content }}
			</article>
		</section>

		<script>
			document.querySelectorAll("h3").forEach(item => {
				if (item.classList.contains("no-anchor"))
					return;

				item.addEventListener("click", event => {
					history.pushState(null, null, "#" + event.target.id);
					navigator.clipboard.writeText(window.location.href);
					event.target.scrollIntoView();
				});
			});

			function openNav() {
				document.body.classList.toggle("nav-open");
			}

			function changeActive() {
				let active = document.querySelector(".active");
				active?.classList.toggle("active");

				if (event.target.parentNode !== active)
					event.target.parentNode.classList.toggle("active");
			}

			function onKeyDown() {
				if (event.key === "Enter")
					changeActive(event.target);
			}
		</script>
	</body>
</html>
