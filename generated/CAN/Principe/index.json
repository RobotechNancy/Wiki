{
    "hidden": "false",
    "title": "Principe",
    "description": "Principe de fonctionnement du bus CAN",
    "order": "1",
    "uri": "CAN/Principe",
    "page_content": "<p>Un bus CAN (Control Area Network) est un moyen de communication en temps r\u00e9el avec un haut niveau de fiabilit\u00e9.\nC'est un bus orient\u00e9 message compos\u00e9 de deux fils (CAN-H et CAN-L) qui permettent de faire communiquer plusieurs n\u0153uds entre eux :\n<img alt=\"Sch\u00e9ma CAN\" loading=\"lazy\" src=\"http://127.0.0.1:8000/static/images/CAN/schema.webp\" /></p>\n<blockquote>\n<p>Pour avoir une architecture modulaire et r\u00e9active, tous les noeuds sont connect\u00e9s en configuration <code>High Speed</code>\n(jusqu'\u00e0 1 Mbit/s au lieu de 125 kbit/s)</p>\n</blockquote>\n<h3>Transmission</h3>\n<p>La communication sur le bus CAN s'appuie sur le principe de la diffusion (broadcast).\nChaque n\u0153ud \u00e9coute le bus et d\u00e9cide de quoi faire avec les messages re\u00e7us.</p>\n<p>Pour \u00e9viter les collisions, la m\u00e9thode CSMA CD/AMP est utilis\u00e9e.\nElle permet de d\u00e9terminer quel message est prioritaire en fonction de son identifiant (ID) et de sa priorit\u00e9 (plus la valeur est basse, plus le message est prioritaire).</p>\n<p>Les messages sont transmis sur le bus sont cod\u00e9s avec la m\u00e9thode NRZ (pas de retour \u00e0 z\u00e9ro apr\u00e8s chaque bit) :\n<img alt=\"NRZ\" loading=\"lazy\" src=\"http://127.0.0.1:8000/static/images/CAN/NRZ.webp\" /></p>\n<p>Cette m\u00e9thode pr\u00e9sente un d\u00e9faut majeur : les longues s\u00e9quences de bits sont difficiles \u00e0 d\u00e9coder.\nC'est pourquoi, tous les 5 bits, un bit de contr\u00f4le est ajout\u00e9 (Bit Stuffing) :\n<img alt=\"NRZS\" loading=\"lazy\" src=\"http://127.0.0.1:8000/static/images/CAN/NRZS.webp\" /></p>\n<h3>Protocoles</h3>\n<p>Deux protocoles sont souvent utilis\u00e9s : <code>CAN 2.0a</code> (en haut) et <code>CAN 2.0b</code> (en bas) :\n<img alt=\"Protocoles\" loading=\"lazy\" src=\"http://127.0.0.1:8000/static/images/CAN/protocols.webp\" /></p>\n<p>Il est possible d'utiliser les champs <code>Identifier</code> et <code>Extended Identifier</code> pour cr\u00e9er une trame applicative :\nC'est une trame qui contient des meta-donn\u00e9es sur le message et qui sert aux noeuds \u00e0 savoir quoi faire avec le message.</p>\n<p>Il est important de comprendre :</p>\n<ul>\n<li>Il n'y a pas de notion d'adresse \u00e0 proprement parler, les noeuds ne font qu'appliquer des filtres sur les messages re\u00e7us</li>\n<li>Les champs d'identification et le champ de donn\u00e9es sont deux choses diff\u00e9rentes</li>\n</ul>"
}