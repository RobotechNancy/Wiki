{
    "hidden": "false",
    "title": "Lier des librairies",
    "description": "Comment lier des librairies externes \u00e0 un projet CMake",
    "order": "3",
    "uri": "CMake/Lier",
    "page_content": "<p>Lier des librairies permet de facilement r\u00e9utiliser du code existant dans plusieurs projets.\nIl est important de comprendre que si la librairie a \u00e9t\u00e9 install\u00e9e (<code>sudo make install</code>), il faudra la r\u00e9installer \u00e0 chaque modification :\n<img alt=\"Lier des librairies\" src=\"http://127.0.0.1:8000/static/images/CMake.webp\" /></p>\n<h3>Librairies standard et Robotech</h3>\n<p>Pour une librairie standard ou compatible, il suffit d'utiliser <code>find_package</code> et <code>target_link_libraries</code> :</p>\n<div class=\"codehilite\"><pre tabindex='0'><span></span><code><span class=\"c\"># Apr\u00e8s add_executable</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">MyLib</span><span class=\"w\"> </span><span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">${</span><span class=\"nv\">MyLib_LIBRARIES</span><span class=\"o\">}</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p>Ces librairies se trouvent souvant dans <code>/usr/local/lib</code> (ou <code>lib64</code>) et <code>/usr/local/include</code>.\nPour l'instant, deux librairies Robotech sont disponibles : <code>CAN</code> et <code>XBee</code>.</p>\n<h3>Librairies non standard</h3>\n<p><code>target_include_directories</code> peut \u00eatre utilis\u00e9 pour indiquer o\u00f9 se trouvent les headers :</p>\n<div class=\"codehilite\"><pre tabindex='0'><span></span><code><span class=\"c\"># Apr\u00e8s add_executable</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">MyLib</span><span class=\"w\"> </span><span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">${</span><span class=\"nv\">MyLib_LIBRARIES</span><span class=\"o\">}</span><span class=\"p\">)</span>\n<span class=\"nb\">target_include_directories</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"s\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">${</span><span class=\"nv\">MyLib_INCLUDE_DIRS</span><span class=\"o\">}</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<h3>PkgConfig</h3>\n<p>Similairement, si la librairie utilise <code>pkg-config</code>, <code>pkg_check_modules</code> peut \u00eatre utilis\u00e9 :</p>\n<div class=\"codehilite\"><pre tabindex='0'><span></span><code><span class=\"c\"># Apr\u00e8s add_executable</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">PkgConfig</span><span class=\"w\"> </span><span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n<span class=\"nb\">pkg_check_modules</span><span class=\"p\">(</span><span class=\"s\">MyLib</span><span class=\"w\"> </span><span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">${</span><span class=\"nv\">MyLib_LIBRARIES</span><span class=\"o\">}</span><span class=\"p\">)</span>\n<span class=\"nb\">target_include_directories</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"s\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">${</span><span class=\"nv\">MyLib_INCLUDE_DIRS</span><span class=\"o\">}</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<h3>Librairies dans le projet</h3>\n<p>Si la librairie est incluse dans le projet, il faut utiliser <code>add_subdirectory</code> :</p>\n<div class=\"codehilite\"><pre tabindex='0'><span></span><code><span class=\"c\"># Avant add_executable</span>\n<span class=\"nb\">add_subdirectory</span><span class=\"p\">(</span><span class=\"s\">chemin/vers/MyLib</span><span class=\"p\">)</span>\n\n<span class=\"c\"># Apr\u00e8s add_executable</span>\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">PROJECT_NAME</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"s\">MyLib</span><span class=\"p\">)</span>\n</code></pre></div>"
}